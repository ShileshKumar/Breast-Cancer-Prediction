(function(window,document,$){const mobileNavToggle=document.querySelector('.mda-nav-mobile-menu');const nav=document.querySelector('nav.mda-nav');const navWrapper=nav.querySelector('.mda-nav-wrapper');const content=document.querySelector('.mda-content');const header=document.querySelector('header.mda-nav');const desktopSearch=document.querySelector('.mda-nav-search.desktop .mda-nav-search-field');const desktopSearchClose=document.querySelector('.mda-nav-search.desktop .mda-nav-search-close');let openSublistListener;if(window.innerWidth<992){$(nav).hide();}mobileNavToggle.addEventListener('click',toggleMobileNav);$(desktopSearch).on('click focus',activateDesktopSearch);$('.dropdown-trigger').on('click mouseover',toggleSublist);$('.mda-nav-link-sub-more.mobile').on('click',openMainSublist);$('.mobile .mda-nav-link-sub-back').on('click',closeMainSublist);window.addEventListener('resize',windowResizeHandler);function windowResizeHandler(event){if(window.innerWidth>991){$(nav).show();}if(window.innerWidth>991&&document.body.classList.contains('mda-nav-open')){toggleMobileNav(event);}if(window.innerWidth<992){if(openSublistListener){openSublistListener(null);}if(document.body.classList.contains('mda-search-active')){closeDesktopSearch();}}if(window.innerWidth<992&&!document.body.classList.contains('mda-nav-open')){$(nav).hide();}}function toggleSublist(event){const container=event.target.closest('.dropdown');const container$=$(container);const sublist$=$(container.querySelector('.dropdown-sublist'));const dropdownTriggerButton=container.querySelector('.dropdown-trigger-button');if(event.type==='click'){if(container.classList.contains('open')){closeSublist(event,container);}else{container.classList.add('open');openSublistListener=sublistContainerClickHandler.bind(container);document.body.addEventListener('click',openSublistListener);document.body.addEventListener('focusin',openSublistListener);container.removeEventListener('mouseout',sublistContainerMouseoutHandler);}if(container.classList.contains('open')&&!container.classList.contains('hover')){toggleAriaExpanded(container);sublist$.animate({height:'toggle',opacity:'toggle',},'fast');}}if(event.type==='mouseover'&&!container.classList.contains('hover')&&!(window.innerWidth<992&&event.target.closest('.mda-nav-main-list'))){if(event.fromElement&&event.fromElement.closest('.dropdown')&&event.fromElement.closest('.mda-nav-main-list')){toggleAriaExpanded(container);sublist$.stop().animate({height:'toggle',opacity:'toggle',},0);}else{toggleAriaExpanded(container);sublist$.stop().animate({height:'toggle',opacity:'toggle',},'fast');}container.classList.add('hover');container.addEventListener('mouseover',onOpenSublistContainerMouseoverHandler);container.addEventListener('mouseout',sublistContainerMouseoutHandler);}}function openMainSublist(event){const parentSublistContainer=event.target.closest('.dropdown');const container=event.target.closest('.mda-nav-main-sublist-container');const mainSublist=container.closest('.mda-nav-main');const nav=document.querySelector('nav.mda-nav');const backButton=container.querySelector('.mda-nav-link-sub-back');const moreButton=container.querySelector('.mda-nav-link-sub-more');mainSublist.addEventListener('transitionend',function setMainSublistFocus(){backButton.focus();captureMainSublistFocus();mainSublist.removeEventListener('transitionend',setMainSublistFocus);});if(!parentSublistContainer.classList.contains('open')){toggleSublist(event);}if(!container.classList.contains('active')){container.classList.add('active');}if(!nav.classList.contains('mda-nav-main-sublist-open')){nav.classList.add('mda-nav-main-sublist-open');moreButton.setAttribute('aria-expanded','true');}}function captureMainSublistFocus(){const backButton=document.querySelector('.mda-nav-main-sublist-container.active .mda-nav-link-sub-back');document.body.addEventListener('focusout',onMainSublistFocusCapture);backButton.addEventListener('click',removeMainSublistFocusCapture);}function onMainSublistFocusCapture(event){const bodyContent=document.body.querySelector('.mda-content');bodyContent.setAttribute('aria-hidden','true');const logo=document.body.querySelector('.mda-nav-logo');if(bodyContent.contains(event.relatedTarget)){logo.focus();}}function removeMainSublistFocusCapture(){const backButton=document.querySelector('.mda-nav-main-sublist-container.active .mda-nav-link-sub-back');const bodyContent=document.body.querySelector('.mda-content');bodyContent.setAttribute('aria-hidden','false');document.body.removeEventListener('focusout',onMainSublistFocusCapture);if(backButton){backButton.removeEventListener('click',removeMainSublistFocusCapture);}}function closeMainSublist(){const nav=document.querySelector('nav.mda-nav');const container=nav.querySelector('.mda-nav-main-sublist-container.active');if(container&&container.classList.contains('active')){const mainSublist=container.closest('.mda-nav-main');const backButton=container.querySelector('.mda-nav-link-sub-back');container.classList.remove('active');const moreButton=container.querySelector('.mda-nav-link-sub-more');moreButton.setAttribute('aria-expanded','false');mainSublist.addEventListener('transitionend',function onSublistClose(){moreButton.focus();mainSublist.removeEventListener('transitionend',onSublistClose);});}if(nav.classList.contains('mda-nav-main-sublist-open')){nav.classList.remove('mda-nav-main-sublist-open');}}function sublistContainerClickHandler(event){if(nav.classList.contains('mda-nav-main-sublist-open')){return false;}if(!event||!this.contains(event.target)){closeSublist(event,this);}}function sublistContainerMouseoutHandler(event){const container=event.target.classList.contains('dropdown')?event.target:event.target.closest('.dropdown');const sublist=container.querySelector('.dropdown-sublist');if(!container.contains(event.relatedTarget)){closeSublist(event,container);}}function onOpenSublistContainerMouseoverHandler(event){const container=event.target.classList.contains('dropdown')?event.target:event.target.closest('.dropdown');if(container&&!container.classList.contains('open')){const list=container.closest('.mda-nav-main-list');if(list){const openContainer=list.querySelector('.open');if(openContainer){openContainer.classList.remove('open');closeSublist(event,openContainer);}}document.body.removeEventListener('click',openSublistListener);document.body.removeEventListener('focusin',openSublistListener);}}function closeSublist(event,container){const sublist$=$(container.querySelector('.dropdown-sublist'));if(event.type==='click'||event.type==='focusin'){container.classList.remove('open');document.body.removeEventListener('click',openSublistListener);document.body.removeEventListener('focusin',openSublistListener);closeMainSublist();}container.classList.remove('hover');container.removeEventListener('mouseout',sublistContainerMouseoutHandler);container.removeEventListener('mouseover',onOpenSublistContainerMouseoverHandler);toggleAriaExpanded(container);sublist$.animate({height:'toggle',opacity:'toggle',},'fast');}function activateDesktopSearch(){document.body.classList.add('mda-search-active');desktopSearch.removeEventListener('click',activateDesktopSearch);desktopSearchClose.addEventListener('click',closeDesktopSearch);desktopSearch.addEventListener('blur',closeDesktopSearch);}function closeDesktopSearch(event){if(event&&event.type==='blur'&&event.target.value){return false;}if(document.activeElement==document.body){const searchContainer=document.querySelector('.mda-nav-search.desktop');if(searchContainer.contains(event.relatedTarget)){document.getElementById('mda-nav-link-1').focus();}}desktopSearchClose.removeEventListener('click',closeDesktopSearch);desktopSearch.removeEventListener('blur',closeDesktopSearch);document.body.classList.remove('mda-search-active');desktopSearch.addEventListener('click',activateDesktopSearch);removeClass('.mda-nav-search.desktop','hasVal');}function toggleMobileNav(event){event.preventDefault();const toggleButton=event.target.closest('.mda-nav-mobile-menu-button');if(!toggleButton||toggleButton.getAttribute('disabled')){return false;}if(!document.body.classList.contains('mda-nav-open')){$(nav).css({top:header.offsetHeight,height:'calc(100vh - '+header.offsetHeight+'px)'}).show();}setTimeout(function(){$('body, html').toggleClass('mda-nav-open');toggleClass('.mda-nav-mobile-menu-button','active');if(!document.body.classList.contains('mda-nav-open')){removeMainSublistFocusCapture();if(window.innerWidth<992){navWrapper.addEventListener('transitionend',function hideNav(){$(nav).hide();navWrapper.removeEventListener('transitionend',hideNav);});}}},0);closeMainSublist();const activeButton=document.querySelector('.mda-nav-mobile-menu-button.active');activeButton.setAttribute('disabled','true');navWrapper.addEventListener('transitionend',function toggleNavState(){$('nav.mda-nav .mda-nav-wrapper').toggleClass('open');activeButton.removeAttribute('disabled');document.querySelector('.mda-nav-mobile-menu-button.active').focus();navWrapper.removeEventListener('transitionend',toggleNavState);});return document.body.classList.contains('mda-nav-open')?content.addEventListener('click',toggleMobileNav):content.removeEventListener('click',toggleMobileNav);}function toggleAriaExpanded(dropdown){const el=dropdown.querySelector('.dropdown-trigger-button')||dropdown.querySelector('.dropdown-trigger');if(el&&el.getAttribute('aria-expanded')==='true'){return el.setAttribute('aria-expanded','false');}if(el&&el.getAttribute('aria-expanded')==='false'){return el.setAttribute('aria-expanded','true');}}function toggleClass(selector,className){const elements=arrayFromSelector(selector);elements.forEach(function(element){return element.classList.contains(className)?element.classList.remove(className):element.classList.add(className);});}function addClass(selector,className){const elements=arrayFromSelector(selector);elements.forEach(function(element){return element.classList.contains(className)?false:element.classList.add(className);});}function removeClass(selector,className){const elements=arrayFromSelector(selector);elements.forEach(function(element){return element.classList.contains(className)?element.classList.remove(className):false;});}function arrayFromSelector(selector){return[].slice.call(document.querySelectorAll(selector));}})(window,document,$);(function(ElementProto){if(typeof ElementProto.matches!=='function'){ElementProto.matches=ElementProto.msMatchesSelector||ElementProto.mozMatchesSelector||ElementProto.webkitMatchesSelector||function matches(selector){var element=this;var elements=(element.document||element.ownerDocument).querySelectorAll(selector);var index=0;while(elements[index]&&elements[index]!==element){++index;}return Boolean(elements[index]);};}if(typeof ElementProto.closest!=='function'){ElementProto.closest=function closest(selector){var element=this;while(element&&element.nodeType===1){if(element.matches(selector)){return element;}element=element.parentNode;}return null;};}})(window.Element.prototype);